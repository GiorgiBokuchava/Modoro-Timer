<Window x:Class="Modoro_Timer.Views.TimerPopup"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:controls="clr-namespace:Modoro_Timer.Controls"
        Title="TimerPopup"
        Width="305" Height="330"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ShowActivated="True"
        Focusable="True">

    <!-- Rounded corners & shadow via WindowChrome -->
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome
      CornerRadius="7"
      GlassFrameThickness="0"
      UseAeroCaptionButtons="False" />
    </shell:WindowChrome.WindowChrome>

    <Border Background="#FF151B28"
          CornerRadius="7"
          Padding="12"
          SnapsToDevicePixels="True">
        <Grid>
            <!-- 1) The ring itself -->
            <controls:CircularProgressRing
        Fraction="{Binding ProgressFraction}"
        Width="180" Height="180"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"/>

            <!-- 2) Time & dots on top of the ring -->
            <StackPanel HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="{Binding RemainingTime}"
                   FontSize="28"
                   Foreground="White"
                   HorizontalAlignment="Center"/>
                <ItemsControl ItemsSource="{Binding SessionDots}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"
                          HorizontalAlignment="Center"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Ellipse Width="8"
                       Height="8"
                       Margin="4"
                       Fill="{Binding FillBrush}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>

            <!-- 3) Session name overlayed -->
            <TextBlock Text="{Binding SessionTypeDisplay}"
                 FontSize="14"
                 Foreground="White"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center"
                 Margin="0,-80,0,0"
                 Panel.ZIndex="1"/>

            <!-- 4) Controls at the bottom -->
            <StackPanel Orientation="Horizontal"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Bottom"
                  Margin="0,0,0,10">
                <Button Content="{Binding PauseResumeText}"
                Width="40"
                Margin="0,0,10,0"
                Command="{Binding TogglePauseResumeCommand}"/>
                <Button Content="⏭ skip"
                Width="40"
                Margin="0,0,10,0"
                Command="{Binding SkipCommand}"/>
                <Button Content="⏹ reset"
                Width="40"
                Command="{Binding ResetCommand}"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>